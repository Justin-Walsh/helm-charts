suite: "Script Pod Configuration"
templates:
  - templates/upgrade-helm-secret.yaml
tests:
  - it: "Creates a secret with the expected string"
    set:
      upgrade:
        username: "username"
        password: "password"
        registry: "registry"
    asserts:
      - hasDocuments:
          count: 1
      - equal:
          path: data[".dockerconfigjson"]
          value: "eyJhdXRocyI6eyJyZWdpc3RyeSI6eyJwYXNzd29yZCI6InBhc3N3b3JkIiwicmVnaXN0cnkiOiJyZWdpc3RyeSIsInVzZXJuYW1lIjoidXNlcm5hbWUifX0="
          